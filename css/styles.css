:root{
  --bg1:#0b1025;
  --bg2:#0f172a;
  --card:#111827;
  --accent:#38bdf8;
  --ok:#34d399;
  --fail:#f87171;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --card-pad: 10px; 
  --shadow:0 8px 24px rgba(0,0,0,.45);
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Color Emoji", "Apple Color Emoji";
  background:linear-gradient(160deg, var(--bg1), var(--bg2));
  color:var(--text);
}

/* Topbar */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:1rem 1.25rem;
  border-bottom:1px solid rgba(255,255,255,.06);
}
.topbar h1{ margin:0; font-size:1.25rem; letter-spacing:.2px }
.controls{ display:flex; align-items:center; gap:.5rem; flex-wrap:wrap }
.control{ display:flex; align-items:center; gap:.35rem; color:var(--muted) }
select{
  background:#0b132a; border:1px solid #1e293b; color:var(--text); padding:.45rem .6rem;
  border-radius:10px; outline:none
}
.btn{
  cursor:pointer; border:1px solid #1e293b; background:#0b132a; color:var(--text);
  padding:.5rem .8rem; border-radius:12px; box-shadow:var(--shadow); transition:transform .05s ease, background .2s ease
}
.btn:hover{ background:#0c1632 }
.btn:active{ transform:translateY(1px) }
.btn.primary{ background:linear-gradient(180deg,#1f6feb,#2563eb); border-color:transparent }
.btn.ghost{ background:transparent; border:1px solid #233044 }

/* HUD */
.hud{
  display:grid; grid-template-columns:repeat(5,auto);
  gap:.75rem; padding:0 1.25rem; align-items:center; justify-content:center;
}
.hud-item{ padding:.25rem .5rem; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06); border-radius:10px }

/* Board */
.board{
  display:grid; gap:.75rem; padding:1.25rem; justify-content:center;
  grid-template-columns: repeat(3, min(110px, 26vw)); /* Reajustado por JS según nivel */
}

/* Card */
.card{
  width:min(110px,26vw); height:min(140px,32vw); perspective: 1000px; position:relative;
  border:none; background:transparent; padding:0; cursor:pointer;
}
.card:focus-visible{ outline:3px solid #3b82f6; outline-offset:3px; border-radius:14px }

.card-inner{
  width:100%; height:100%; transform-style:preserve-3d; transition:transform .4s ease;
}
.card.is-flipped .card-inner{ transform: rotateY(180deg); }
.face{
  position:absolute; inset:0; backface-visibility:hidden; border-radius:14px; overflow:hidden;
  border:2px solid rgba(255,255,255,.08); box-shadow:0 6px 18px rgba(0,0,0,.35);
}

/* Back face */
.face.back{
  display:grid; place-items:center;
  background:radial-gradient(120% 80% at 10% 10%, #1f2937, #0b0f1c);
}

.face.back .pattern-img{
  width:100%;
  height:100%;
  object-fit: contain;      /* que se vea completa */
  object-position: center;
  display:block;
  opacity:.95;              /* opcional */
}

/* Front face */
.face.front {
  width:100%;
  height:100%;
  max-width:100%;
  max-height:100%;
  object-fit: contain;      /* <- evita que se corte; puede dejar “bandas” si la proporción no coincide */
  object-position: center;  /* centrado explícito */
  display:block;
  border-radius: 10px;      /* leve radio para que se vea bien dentro del contenedor redondeado */
}

.face.front img{
  width:100%; height:100%; object-fit:cover; display:block;
}


/* States */
.card.matched .face{ outline:3px solid var(--ok); animation:pulse .7s ease }
@keyframes pulse{50%{transform:scale(1.02)}}

/* Modal */
.modal{ position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,.55) }
.modal[hidden]{ display:none }
.modal-card{
  background:#0b1025; border:1px solid #1e293b; padding:1rem 1.25rem; border-radius:14px; max-width:420px;
  box-shadow:var(--shadow)
}
.modal-card h2{ margin-top:0 }
.modal-actions{ display:flex; justify-content:flex-end; gap:.5rem; margin-top:.75rem }

/* Utility */
.sr-only{
  position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* Responsive tweaks */
@media (min-width:768px){
  .board{ gap:1rem }
  .face.front .emoji{ font-size:64px }
}
